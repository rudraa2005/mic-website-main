<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Progress - MAHE Innovation Centre</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .liquid-glass { background: rgba(255,255,255,.1); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,.2); box-shadow: 0 8px 32px rgba(31,38,135,.37); }
    .liquid-glass::before { content:''; position:absolute; inset:0; background:linear-gradient(135deg, rgba(255,255,255,.4), rgba(255,255,255,.1)); border-radius:inherit; z-index:-1; }
    .nav-link::before { content:""; position:absolute; bottom:-5px; left:50%; width:0; height:2px; background:linear-gradient(90deg,#ff6b35,#ff8c42); transition:all .3s ease; transform:translateX(-50%); border-radius:2px; }
    .nav-link:hover::before { width:100%; }
    .glass-card { 
      background: rgba(255, 255, 255, 0.15); 
      backdrop-filter: blur(10px); 
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
    }
    .glass-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    
    /* Enhanced Progress Bar */
    .progress-bar {
      height: 16px;
      background: linear-gradient(to bottom, #f3f4f6, #e5e7eb);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.15), 0 1px 2px rgba(0,0,0,0.1);
      border: 1px solid rgba(0,0,0,0.05);
      position: relative;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(135deg, #ff6b35 0%, #ff8c42 50%, #ffa726 100%);
      transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 12px rgba(255,107,53,0.4), inset 0 1px 0 rgba(255,255,255,0.2);
      position: relative;
      border-radius: 10px;
    }
    .progress-fill::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer 2.5s infinite;
      border-radius: 10px;
    }
    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: linear-gradient(to bottom, rgba(255,255,255,0.3), transparent);
      border-radius: 10px 10px 0 0;
    }
    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    .progress-bar-container {
      position: relative;
    }
    .progress-percentage {
      position: static;
      font-weight: 700;
      font-size: 0.875rem;
      color: #ff6b35;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    
    /* Timeline */
    .timeline-item {
      position: relative;
      padding-left: 2rem;
    }
    .timeline-item::before {
      content: '';
      position: absolute;
      left: 0.5rem;
      top: 0.5rem;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #d1d5db;
      border: 3px solid white;
      box-shadow: 0 0 0 2px #d1d5db;
    }
    .timeline-item.completed::before {
      background: #10b981;
      box-shadow: 0 0 0 2px #10b981;
    }
    .timeline-item.active::before {
      background: #ff6b35;
      box-shadow: 0 0 0 2px #ff6b35, 0 0 20px rgba(255,107,53,0.5);
      animation: pulse 2s infinite;
    }
    .timeline-item::after {
      content: '';
      position: absolute;
      left: 0.5rem;
      top: 1.5rem;
      width: 2px;
      height: calc(100% - 0.5rem);
      background: #e5e7eb;
    }
    .timeline-item:last-child::after {
      display: none;
    }
    .timeline-item.completed::after {
      background: linear-gradient(to bottom, #10b981, #e5e7eb);
    }
    @keyframes pulse {
      0%, 100% { 
        opacity: 1; 
        transform: scale(1);
      }
      50% { 
        opacity: 0.7; 
        transform: scale(1.1);
      }
    }
    
    /* Enhanced cards - black ombre tiles with subtle pop-out */
    .progress-card {
      position: relative;
      background: linear-gradient(135deg, #020617 0%, #111827 40%, #020617 100%);
      color: #ffffff;
      border: 1px solid rgba(15,23,42,0.9);
      box-shadow: 0 20px 40px rgba(0,0,0,0.7);
      transition: transform 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                  box-shadow 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                  background 0.35s ease;
      transform-origin: center;
    }
    .progress-card:hover {
      background: linear-gradient(135deg, #000000 0%, #020617 30%, #111827 100%);
      transform: translateY(-15px) scale(1.03);
      box-shadow: 0 40px 90px rgba(0,0,0,0.85);
    }

    /* Dark Mode Styles */
    body.dark-mode {
      background: #0f172a;
      color: #e2e8f0;
    }
    body.dark-mode .bg-gray-50,
    body.dark-mode .bg-gray-100,
    body.dark-mode .bg-gray-200 {
      background: #1e293b !important;
    }
    body.dark-mode .bg-gray-900 {
      background: #0f172a !important;
    }
    /* Dark mode fixes for Healthcare AI Platform timeline cards */
    body.dark-mode .bg-green-50 {
      background: #064e3b !important;
    }
    body.dark-mode .bg-green-100 {
      background: #065f46 !important;
    }
    body.dark-mode .border-green-500 {
      border-color: #22c55e !important;
    }
    body.dark-mode .bg-orange-50 {
      background: #7c2d12 !important;
    }
    body.dark-mode .bg-orange-100 {
      background: #9a3412 !important;
    }
    body.dark-mode .border-orange-500 {
      border-color: #fb923c !important;
    }
    body.dark-mode .text-gray-800,
    body.dark-mode .text-gray-900 {
      color: #e2e8f0 !important;
    }
    body.dark-mode .text-gray-600,
    body.dark-mode .text-gray-700 {
      color: #cbd5e1 !important;
    }
    body.dark-mode .text-gray-500 {
      color: #94a3b8 !important;
    }
    body.dark-mode .text-gray-400 {
      color: #94a3b8 !important;
    }
    body.dark-mode .text-white {
      color: #f8fafc !important;
    }
    body.dark-mode .text-black {
      color: #f8fafc !important;
    }
    body.dark-mode .liquid-glass {
      background: rgba(30, 41, 59, 0.8) !important;
    }
    body.dark-mode .nav-link {
      color: #cbd5e1 !important;
    }
    body.dark-mode .nav-link:hover {
      color: #ff6b35 !important;
    }
    body.dark-mode .bg-white {
      background: #1e293b !important;
    }
    body.dark-mode .bg-gray-800 {
      background: #1e293b !important;
    }
    body.dark-mode .border-gray-800 {
      border-color: #1e293b !important;
    }
    body.dark-mode .border-gray-700 {
      border-color: #334155 !important;
    }
    body.dark-mode .glass-card {
      background: rgba(30, 41, 59, 0.8) !important;
    }
    body.dark-mode .progress-card {
      background: linear-gradient(135deg, rgba(30, 41, 59, 0.95) 0%, rgba(30, 41, 59, 0.85) 100%) !important;
    }
  </style>
  <script>
    tailwind.config = { theme: { extend: { colors: { 'orange-primary':'#ff6b35','orange-secondary':'#ff8c42' }, fontFamily: { inter:['Inter','sans-serif'] } } } }
  </script>
</head>
<body class="bg-gray-200 font-inter overflow-x-hidden">
  <!-- Navigation -->
  <nav class="fixed top-4 left-1/2 -translate-x-1/2 z-50 w-11/12 max-w-6xl">
    <div class="liquid-glass rounded-full px-6 py-3 relative">
      <div class="flex justify-between items-center">
        <div class="flex items-center space-x-2">
          <div class="w-8 h-8 bg-gradient-to-br from-orange-primary to-orange-secondary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">M</span></div>
          <span class="text-gray-800 font-semibold text-lg">MAHE</span>
        </div>
        <div class="hidden md:flex items-center space-x-8 ml-auto">
          <a href="index-tailwind.html" class="nav-link relative text-gray-700 hover:text-orange-primary transition-colors font-medium">Home</a>
          <a href="about.html" class="nav-link relative text-gray-700 hover:text-orange-primary transition-colors font-medium">About Us</a>
          <a href="events.html" class="nav-link relative text-gray-700 hover:text-orange-primary transition-colors font-medium">Events</a>
          <a href="resources.html" class="nav-link relative text-gray-700 hover:text-orange-primary transition-colors font-medium">Resources</a>
          <a href="contact.html" class="nav-link relative text-gray-700 hover:text-orange-primary transition-colors font-medium">Contact</a>
        </div>
        <div class="hidden md:flex items-center space-x-4 ml-4">
          <a href="profile.html" class="w-10 h-10 rounded-full bg-orange-primary text-white flex items-center justify-center">
            <i class="fas fa-user"></i>
          </a>
        </div>
        <button class="md:hidden text-gray-700" id="mobile-menu-btn"><i class="fas fa-bars text-xl"></i></button>
      </div>
      <!-- Mobile Menu -->
      <div id="mobile-menu" class="hidden md:hidden mt-4 pb-2">
        <div class="flex flex-col space-y-4">
          <a href="index-tailwind.html" class="nav-link relative text-gray-700 hover:text-orange-primary transition-colors font-medium">Home</a>
          <a href="about.html" class="nav-link relative text-gray-700 hover:text-orange-primary transition-colors font-medium">About Us</a>
          <a href="events.html" class="nav-link relative text-gray-700 hover:text-orange-primary transition-colors font-medium">Events</a>
          <a href="resources.html" class="nav-link relative text-gray-700 hover:text-orange-primary transition-colors font-medium">Resources</a>
          <a href="contact.html" class="nav-link relative text-gray-700 hover:text-orange-primary transition-colors font-medium">Contact</a>
          <a href="profile.html" class="w-10 h-10 rounded-full bg-orange-primary text-white flex items-center justify-center">
            <i class="fas fa-user"></i>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <section class="pt-32 pb-24 bg-gray-50 min-h-screen">
    <div class="container mx-auto px-6 lg:px-12">
      <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="mb-10">
          <h1 class="text-5xl font-black text-gray-900 mb-3 bg-gradient-to-r from-orange-primary to-orange-secondary bg-clip-text text-transparent">Application Progress</h1>
          <p class="text-lg text-gray-600">Track the status of your startup applications and reviews</p>
        </div>

        <!-- Progress Overview -->
        <div class="progress-card glass-card rounded-3xl p-8 mb-8">
          <h2 class="text-3xl font-bold text-white mb-8 flex items-center">
            <i class="fas fa-chart-line text-orange-primary mr-3"></i>
            Overall Progress
          </h2>
          <div id="progressOverview" class="space-y-8">
            <div class="text-center py-12">
              <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-orange-primary mx-auto"></div>
              <p class="text-white mt-4">Loading progress data...</p>
            </div>
          </div>
        </div>

        <!-- Detailed Timeline -->
        <div class="progress-card glass-card rounded-3xl p-8" id="timelineSection">
          <div id="timelineContent">
            <div class="text-center py-12">
              <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-orange-primary mx-auto"></div>
              <p class="text-white mt-4">Loading timeline data...</p>
            </div>
          </div>
        </div>

        <!-- Status Cards -->
        <div class="grid md:grid-cols-3 gap-6 mt-8" id="statusCards">
          <div class="progress-card glass-card rounded-2xl p-8 text-center transform transition-all">
            <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
              <i class="fas fa-check-circle text-white text-3xl"></i>
            </div>
            <h3 class="text-4xl font-black text-white mb-2" id="approvedCount">0</h3>
            <p class="text-gray-200 font-semibold">Approved Applications</p>
          </div>
          <div class="progress-card glass-card rounded-2xl p-8 text-center transform transition-all">
            <div class="w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
              <i class="fas fa-clock text-white text-3xl"></i>
            </div>
            <h3 class="text-4xl font-black text-white mb-2" id="reviewCount">0</h3>
            <p class="text-gray-200 font-semibold">Under Review</p>
          </div>
          <div class="progress-card glass-card rounded-2xl p-8 text-center transform transition-all">
            <div class="w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
              <i class="fas fa-file-alt text-white text-3xl"></i>
            </div>
            <h3 class="text-4xl font-black text-white mb-2" id="draftCount">0</h3>
            <p class="text-gray-200 font-semibold">Draft Applications</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-16">
    <div class="container mx-auto px-6 lg:px-12">
      <div class="grid lg:grid-cols-2 gap-12 mb-12">
        <div>
          <h3 class="text-2xl font-semibold mb-6 max-w-sm">Subscribe to our newsletter for the latest features and updates.</h3>
          <form class="flex flex-col sm:flex-row gap-4 mb-4" id="newsletterForm">
            <input type="email" placeholder="Your Email Here" required class="flex-1 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-orange-primary transition-colors" />
            <button type="submit" class="bg-orange-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-orange-secondary transition-colors">Subscribe</button>
          </form>
          <p class="text-sm text-gray-400">By subscribing, you consent to our Privacy Policy and receive updates.</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div>
            <h4 class="font-bold mb-6 uppercase tracking-wider">Useful Links</h4>
            <ul class="space-y-3">
              <li><a href="about.html" class="text-gray-400 hover:text-orange-primary transition-colors">About Us</a></li>
              <li><a href="contact.html" class="text-gray-400 hover:text-orange-primary transition-colors">Contact Us</a></li>
              <li><a href="events.html" class="text-gray-400 hover:text-orange-primary transition-colors">Events</a></li>
              <li><a href="resources.html" class="text-gray-400 hover:text-orange-primary transition-colors">Resources</a></li>
              <li><a href="index-tailwind.html" class="text-gray-400 hover:text-orange-primary transition-colors">Home</a></li>
            </ul>
          </div>
          <div>
            <h4 class="font-bold mb-6 uppercase tracking-wider">Company</h4>
            <ul class="space-y-3">
              <li><a href="#" class="text-gray-400 hover:text-orange-primary transition-colors">Our Team</a></li>
              <li><a href="#" class="text-gray-400 hover:text-orange-primary transition-colors">Leadership</a></li>
              <li><a href="#" class="text-gray-400 hover:text-orange-primary transition-colors">Careers</a></li>
              <li><a href="#" class="text-gray-400 hover:text-orange-primary transition-colors">Press</a></li>
              <li><a href="#" class="text-gray-400 hover:text-orange-primary transition-colors">Purpose</a></li>
            </ul>
          </div>
          <div>
            <h4 class="font-bold mb-6 uppercase tracking-wider">Follow Us</h4>
            <div class="space-y-3">
              <a href="#" class="flex items-center space-x-2 text-gray-400 hover:text-orange-primary transition-colors"><i class="fab fa-facebook"></i><span>Facebook</span></a>
              <a href="#" class="flex items-center space-x-2 text-gray-400 hover:text-orange-primary transition-colors"><i class="fab fa-instagram"></i><span>Instagram</span></a>
              <a href="#" class="flex items-center space-x-2 text-gray-400 hover:text-orange-primary transition-colors"><i class="fab fa-twitter"></i><span>Twitter</span></a>
              <a href="#" class="flex items-center space-x-2 text-gray-400 hover:text-orange-primary transition-colors"><i class="fab fa-linkedin"></i><span>LinkedIn</span></a>
              <a href="#" class="flex items-center space-x-2 text-gray-400 hover:text-orange-primary transition-colors"><i class="fab fa-youtube"></i><span>YouTube</span></a>
            </div>
          </div>
        </div>
      </div>
      <div class="border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center">
        <p class="text-gray-400 text-sm mb-4 md:mb-0">Â© MAHE INNOVATION CENTRE</p>
        <div class="flex space-x-6">
          <a href="#" class="text-gray-400 hover:text-orange-primary transition-colors text-sm">Privacy Policy</a>
          <a href="#" class="text-gray-400 hover:text-orange-primary transition-colors text-sm">Terms of Service</a>
          <a href="#" class="text-gray-400 hover:text-orange-primary transition-colors text-sm">Cookie Settings</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Mobile menu toggle
    document.getElementById('mobile-menu-btn')?.addEventListener('click', function() {
      const menu = document.getElementById('mobile-menu');
      menu.classList.toggle('hidden');
    });

    // Newsletter form
    document.getElementById('newsletterForm')?.addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Thank you for subscribing!');
      this.reset();
    });

    // Calculate progress percentage based on status
    function getProgressPercentage(status) {
      const statusLower = (status || '').toLowerCase();
      if (statusLower === 'approved') return 100;
      if (statusLower === 'submitted') return 50;
      if (statusLower === 'draft') return 25;
      return 0;
    }

    // Format date
    function formatDate(dateString) {
      if (!dateString) return 'N/A';
      const date = new Date(dateString);
      return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
    }

    // Render progress bars
    function renderProgressOverview(submissions) {
      const container = document.getElementById('progressOverview');
      if (!submissions || submissions.length === 0) {
        container.innerHTML = `
          <div class="text-center py-12">
            <i class="fas fa-inbox text-5xl text-gray-400 mb-4"></i>
            <p class="text-white text-lg">No submissions found</p>
            <a href="ai-insight.html" class="inline-block mt-4 text-orange-primary hover:text-orange-secondary">Create your first submission</a>
          </div>
        `;
        return;
      }

      container.innerHTML = submissions.map(submission => {
        const progress = getProgressPercentage(submission.status);
        const statusLower = (submission.status || '').toLowerCase();
        const isComplete = progress === 100;
        
        // Determine color classes based on status
        let dotColorClass = 'bg-yellow-500 ring-yellow-200';
        if (statusLower === 'approved') {
          dotColorClass = 'bg-green-600 ring-green-200';
        } else if (statusLower === 'submitted') {
          dotColorClass = 'bg-orange-primary ring-orange-200';
        }
        
        return `
          <div>
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center space-x-3">
                <div class="w-4 h-4 ${dotColorClass} rounded-full shadow-lg ring-2"></div>
                <span class="text-white font-bold text-lg">${submission.title || 'Untitled Submission'}</span>
              </div>
              <span class="progress-percentage ${isComplete ? 'text-green-600' : ''}">${progress}%</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar">
                <div class="progress-fill ${isComplete ? 'bg-gradient-to-r from-green-500 via-green-600 to-green-700' : ''}" style="width: ${progress}%"></div>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    // Render timeline for a submission
    function renderTimeline(submission) {
      const container = document.getElementById('timelineContent');
      const statusLower = (submission.status || '').toLowerCase();
      
      let timelineHTML = `
        <h2 class="text-3xl font-bold text-white mb-8 flex items-center">
          <i class="fas fa-calendar-alt text-orange-primary mr-3"></i>
          ${submission.title || 'Submission'} - Timeline
        </h2>
        <div class="space-y-8">
      `;

      // Application Submitted - always completed if submission exists
      const submittedDate = submission.created_at;
      timelineHTML += `
        <div class="timeline-item completed">
          <div class="flex items-start justify-between bg-green-50 rounded-xl p-5 border-l-4 border-green-500">
            <div class="flex-1">
              <div class="flex items-center space-x-3 mb-2">
                <i class="fas fa-check-circle text-green-600"></i>
                <h3 class="font-bold text-gray-800 text-lg">Application Submitted</h3>
              </div>
              <p class="text-gray-700 text-sm mb-2">Your application has been successfully submitted for review.</p>
              <span class="text-xs text-gray-500 flex items-center"><i class="far fa-calendar mr-1"></i>${formatDate(submittedDate)}</span>
            </div>
            <span class="px-4 py-2 bg-green-100 text-green-700 rounded-full text-xs font-bold shadow-sm">Completed</span>
          </div>
        </div>
      `;

      // Initial Review - completed if status is submitted or approved
      if (statusLower === 'submitted' || statusLower === 'approved') {
        const reviewDate = submission.updated_at || submittedDate;
        timelineHTML += `
          <div class="timeline-item completed">
            <div class="flex items-start justify-between bg-green-50 rounded-xl p-5 border-l-4 border-green-500">
              <div class="flex-1">
                <div class="flex items-center space-x-3 mb-2">
                  <i class="fas fa-check-circle text-green-600"></i>
                  <h3 class="font-bold text-gray-800 text-lg">Initial Review</h3>
                </div>
                <p class="text-gray-700 text-sm mb-2">Application passed initial screening and moved to detailed review.</p>
                <span class="text-xs text-gray-500 flex items-center"><i class="far fa-calendar mr-1"></i>${formatDate(reviewDate)}</span>
              </div>
              <span class="px-4 py-2 bg-green-100 text-green-700 rounded-full text-xs font-bold shadow-sm">Completed</span>
            </div>
          </div>
        `;
      }

      
      if (statusLower === 'submitted') {
        timelineHTML += `
          <div class="timeline-item active">
            <div class="flex items-start justify-between bg-orange-50 rounded-xl p-5 border-l-4 border-orange-500">
              <div class="flex-1">
                <div class="flex items-center space-x-3 mb-2">
                  <i class="fas fa-spinner fa-spin text-orange-600"></i>
                  <h3 class="font-bold text-gray-800 text-lg">Faculty Review</h3>
                </div>
                <p class="text-gray-700 text-sm mb-2">Currently under review by faculty members.</p>
                <span class="text-xs text-gray-500 flex items-center"><i class="far fa-clock mr-1"></i>In Progress</span>
              </div>
              <span class="px-4 py-2 bg-orange-100 text-orange-700 rounded-full text-xs font-bold shadow-sm">In Progress</span>
            </div>
          </div>
        `;
      } else if (statusLower === 'approved') {
        timelineHTML += `
          <div class="timeline-item completed">
            <div class="flex items-start justify-between bg-green-50 rounded-xl p-5 border-l-4 border-green-500">
              <div class="flex-1">
                <div class="flex items-center space-x-3 mb-2">
                  <i class="fas fa-check-circle text-green-600"></i>
                  <h3 class="font-bold text-gray-800 text-lg">Faculty Review</h3>
                </div>
                <p class="text-gray-700 text-sm mb-2">Application reviewed and approved by faculty members.</p>
                <span class="text-xs text-gray-500 flex items-center"><i class="far fa-calendar mr-1"></i>${formatDate(submission.updated_at)}</span>
              </div>
              <span class="px-4 py-2 bg-green-100 text-green-700 rounded-full text-xs font-bold shadow-sm">Completed</span>
            </div>
          </div>
        `;
      }

      // Final Evaluation - only show if not approved
      if (statusLower !== 'approved') {
        timelineHTML += `
          <div class="timeline-item ${statusLower === 'submitted' ? '' : ''}">
            <div class="flex items-start justify-between bg-gray-50 rounded-xl p-5 border-l-4 border-gray-300">
              <div class="flex-1">
                <div class="flex items-center space-x-3 mb-2">
                  <i class="far fa-circle text-gray-400"></i>
                  <h3 class="font-bold text-gray-500 text-lg">Final Evaluation</h3>
                </div>
                <p class="text-gray-400 text-sm mb-2">Final evaluation and decision by the review committee.</p>
                <span class="text-xs text-gray-400 flex items-center"><i class="far fa-calendar mr-1"></i>Pending</span>
              </div>
              <span class="px-4 py-2 bg-gray-100 text-gray-500 rounded-full text-xs font-bold shadow-sm">Pending</span>
            </div>
          </div>
        `;
      }

      
      if (statusLower !== 'approved') {
        timelineHTML += `
          <div class="timeline-item">
            <div class="flex items-start justify-between bg-gray-50 rounded-xl p-5 border-l-4 border-gray-300">
              <div class="flex-1">
                <div class="flex items-center space-x-3 mb-2">
                  <i class="far fa-circle text-gray-400"></i>
                  <h3 class="font-bold text-gray-500 text-lg">Incubation Approval</h3>
                </div>
                <p class="text-gray-400 text-sm mb-2">Final approval and onboarding to incubation program.</p>
                <span class="text-xs text-gray-400 flex items-center"><i class="far fa-calendar mr-1"></i>Pending</span>
              </div>
              <span class="px-4 py-2 bg-gray-100 text-gray-500 rounded-full text-xs font-bold shadow-sm">Pending</span>
            </div>
          </div>
        `;
      } else {
        
        timelineHTML += `
          <div class="timeline-item completed">
            <div class="flex items-start justify-between bg-green-50 rounded-xl p-5 border-l-4 border-green-500">
              <div class="flex-1">
                <div class="flex items-center space-x-3 mb-2">
                  <i class="fas fa-check-circle text-green-600"></i>
                  <h3 class="font-bold text-gray-800 text-lg">Incubation Approval</h3>
                </div>
                <p class="text-gray-700 text-sm mb-2">Approved and ready for incubation program.</p>
                <span class="text-xs text-gray-500 flex items-center"><i class="far fa-calendar mr-1"></i>${formatDate(submission.updated_at)}</span>
              </div>
              <span class="px-4 py-2 bg-green-100 text-green-700 rounded-full text-xs font-bold shadow-sm">Approved</span>
            </div>
          </div>
        `;
      }

      timelineHTML += '</div>';
      container.innerHTML = timelineHTML;
    }

    // Update status counts
    function updateStatusCounts(submissions) {
      const counts = {
        approved: 0,
        submitted: 0,
        draft: 0
      };

      submissions.forEach(submission => {
        const statusLower = (submission.status || '').toLowerCase();
        if (statusLower === 'approved') counts.approved++;
        else if (statusLower === 'submitted') counts.submitted++;
        else counts.draft++;
      });

      document.getElementById('approvedCount').textContent = counts.approved;
      document.getElementById('reviewCount').textContent = counts.submitted;
      document.getElementById('draftCount').textContent = counts.draft;
    }

    // Load progress data
    async function loadProgressData() {
      const token = localStorage.getItem('authToken');
      if (!token) {
        window.location.href = 'login.html';
        return;
      }

      try {
        const res = await fetch('/api/submissions/mine', {
          method: 'GET',
          headers: {
            'Authorization': `Bearer ${token}`
          }
        });

        if (res.status === 200) {
          const submissions = await res.json();
          
          renderProgressOverview(submissions);
          
          
          if (submissions.length > 0) {
            
            const sortedSubmissions = [...submissions].sort((a, b) => {
              return new Date(b.created_at) - new Date(a.created_at);
            });
            renderTimeline(sortedSubmissions[0]);
          } else {
            document.getElementById('timelineContent').innerHTML = `
              <div class="text-center py-12">
                <i class="fas fa-inbox text-5xl text-gray-400 mb-4"></i>
                <p class="text-white text-lg">No timeline data available</p>
              </div>
            `;
          }
          
          
          updateStatusCounts(submissions);
        } else if (res.status === 401) {
          window.location.href = 'login.html';
        } else {
          throw new Error('Failed to load progress data');
        }
      } catch (error) {
        console.error('Error loading progress:', error);
        document.getElementById('progressOverview').innerHTML = `
          <div class="text-center py-12">
            <i class="fas fa-exclamation-triangle text-5xl text-red-500 mb-4"></i>
            <p class="text-white text-lg">Error loading progress data</p>
            <p class="text-gray-400 text-sm mt-2">${error.message}</p>
          </div>
        `;
      }
    }

    // Load data on page load
    loadProgressData();

    // Dark mode initialization
    (function() {
      const savedTheme = localStorage.getItem('theme');
      const savedSystemTheme = localStorage.getItem('systemTheme');
      const body = document.body;

      function applySystemTheme() {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          body.classList.add('dark-mode');
        } else {
          body.classList.remove('dark-mode');
        }
      }

      if (savedSystemTheme === 'true') {
        applySystemTheme();
        if (window.matchMedia) {
          window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', applySystemTheme);
        }
      } else if (savedTheme === 'dark') {
        body.classList.add('dark-mode');
      }
    })();
  </script>
  <!-- Chatbot Widget -->
  <link rel="stylesheet" href="assets/chatbot.css">
  <script src="assets/chatbot.js"></script>
  <script>
      document.addEventListener('DOMContentLoaded', function() {
          setTimeout(function() {
              const defaultLauncher = document.getElementById('mahe-chatbot-launcher');
              if (defaultLauncher) defaultLauncher.style.display = 'none';
              const customLauncher = document.createElement('button');
              customLauncher.className = 'fixed bottom-6 right-6 z-50 w-14 h-14 rounded-full bg-gradient-to-br from-orange-primary to-orange-secondary text-white shadow-xl flex items-center justify-center hover:scale-110 transition-all duration-300';
              customLauncher.setAttribute('aria-label', 'Open Chatbot');
              customLauncher.innerHTML = '<i class="fas fa-comments text-2xl"></i>';
              customLauncher.onclick = function() { if (window.MaheChatbot) window.MaheChatbot.open(); };
              document.body.appendChild(customLauncher);
          }, 100);
      });
  </script>
</body>
</html>

